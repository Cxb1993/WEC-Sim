

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-88158104-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tutorials &mdash; WEC-Sim  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="WEC-Sim  documentation" href="index.html"/>
        <link rel="next" title="Webinars" href="webinars.html"/>
        <link rel="prev" title="Advanced Features" href="features.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> WEC-Sim
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="theory.html">Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_structure.html">Code Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Advanced Features</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#running-wec-sim">Running WEC-Sim</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#file-structure-overview">File Structure Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-1-wec-sim-pre-processing">Step 1: WEC-Sim Pre-Processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-2-build-wec-sim-model-in-simulink">Step 2: Build WEC-Sim model in Simulink</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-3-write-wec-sim-input-file">Step 3: Write WEC-Sim input file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-4-execute-wec-sim">Step 4: Execute WEC-Sim</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#two-body-point-absorber-rm3">Two-Body Point Absorber (RM3)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">File Structure Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">Step 1: WEC-Sim Pre-Processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">Step 2: Build WEC-Sim model in Simulink</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">Step 3: Write WEC-Sim input file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">Step 4: Execute WEC-Sim</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#output-and-post-processing">Output and Post-processing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-different-wave-cases">Running Different Wave Cases</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#oscillating-surge-wec-oswec">Oscillating Surge WEC (OSWEC)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id11">File Structure Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id12">Step 1: WEC-Sim Pre-Processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id14">Step 2: Build WEC-Sim model in Simulink</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id15">Step 3: Write WEC-Sim input file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id16">Step 4: Execute WEC-Sim</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#other-examples-applications-repository">Other Examples: Applications Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="webinars.html">Webinars</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact Us</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">WEC-Sim</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Tutorials</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/tutorials.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tutorials">
<span id="id1"></span><h1>Tutorials<a class="headerlink" href="#tutorials" title="Permalink to this headline">¶</a></h1>
<p>This section provides an overview of the WEC-Sim work flow. First, the WEC-Sim file structure is described; then, steps for setting up and running the WEC-Sim code are described. Two example applications of using WEC-Sim to model WECs are given. For more information about the implementation and additional features, refer to the <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/code_structure.html">Code Structure</a> section and to the <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/features.html">Advanced Features</a> section respectively.</p>
<div class="section" id="running-wec-sim">
<h2>Running WEC-Sim<a class="headerlink" href="#running-wec-sim" title="Permalink to this headline">¶</a></h2>
<p>This section provides an overview of the WEC-Sim file structure and outlines the steps to run WEC-Sim.</p>
<div class="section" id="file-structure-overview">
<h3>File Structure Overview<a class="headerlink" href="#file-structure-overview" title="Permalink to this headline">¶</a></h3>
<p>All files required for a WEC-Sim simulation must be contained within a case directory referred to as <strong>$CASE</strong>. This directory can be located anywhere on your computer. The table below list the WEC-Sim case directory structure and required files.</p>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="41%" />
<col width="31%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Information</strong></td>
<td><strong>File name</strong></td>
<td><strong>Directory</strong></td>
</tr>
<tr class="row-even"><td>Input File</td>
<td>wecSimInputFile.m</td>
<td><code class="docutils literal"><span class="pre">$CASE</span></code></td>
</tr>
<tr class="row-odd"><td>Simulink Model</td>
<td>&lt;Simulink_model_name&gt;.slx</td>
<td><code class="docutils literal"><span class="pre">$CASE</span></code></td>
</tr>
<tr class="row-even"><td>Hydrodynamic Data</td>
<td>&lt;hydrodata_file_name&gt;.h5</td>
<td><code class="docutils literal"><span class="pre">$CASE</span></code>/hydroData</td>
</tr>
<tr class="row-odd"><td>Geometry File</td>
<td>&lt;STL_file_name&gt;.stl</td>
<td><code class="docutils literal"><span class="pre">$CASE</span></code>/geometry</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="step-1-wec-sim-pre-processing">
<h3>Step 1: WEC-Sim Pre-Processing<a class="headerlink" href="#step-1-wec-sim-pre-processing" title="Permalink to this headline">¶</a></h3>
<p>In the pre-processing step, users need to create the model geometry, calculate the hydrodynamic coefficients, and convert the hydrodynamic coefficients into HDF5 format for WEC-Sim read:</p>
<ul class="simple">
<li><strong>3D WEC Model</strong>: Create 3D models of the WEC and generate a meshes for each body. Export the 3D CAD model in STL format. STL files are used to visualize the WEC bodies in the WEC-Sim/MATLAB GUI, and they are used for <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/features.html#nonlinear-hydrodynamic-forces">WEC-Sim non-linear hydro</a>.</li>
<li><strong>Generate hydrodynamic coefficients</strong>: WEC-Sim requires frequency-domain hydrodynamic coefficients (added mass, radiation damping, and wave excitation). Typically, these hydrodynamic coefficients for each body of the WEC device are generated using a boundary element method (BEM) code (e.g., WAMIT, NEMOH or AQWA).</li>
<li><strong>Create HDF5 file</strong>: WEC-Sim reads the hydrodynamic data in HDF5 format from the (<code class="docutils literal"><span class="pre">&lt;hydrodata_file_name&gt;.h5</span></code>) file. <a class="reference external" href="http://wec-sim.github.io/bemio/">BEMIO</a> was developed to parse BEM solutions (from WAMIT, NEMOH and AQWA) into the required HDF5 data structure.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>WEC-Sim requires that all hydrodynamic coefficients must be given at the center of gravity for each body.</li>
<li>If WAMIT is used, the center of gravity for each body must be at the origin of the body coordinate system (XBODY). More details on WAMIT setup are given in the <a class="reference external" href="http://www.wamit.com/manual.htm">WAMIT User Manual</a>.</li>
<li>Users are able to specify their own hydrodynamic coefficients by creating their own HDF5 file with customized hydrodynamic coefficients following HDF5 format created in BEMIO.</li>
</ul>
</div>
</div>
<div class="section" id="step-2-build-wec-sim-model-in-simulink">
<h3>Step 2: Build WEC-Sim model in Simulink<a class="headerlink" href="#step-2-build-wec-sim-model-in-simulink" title="Permalink to this headline">¶</a></h3>
<p>In this step, users build their WEC model using the <em>WEC-Sim Library</em> developed in Simulink/SimMechanics. The figure below shows an example of a a two-body point absorber modeled using <em>WEC-Sim Library</em>.</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/exampleWecModel.png"><img alt="_images/exampleWecModel.png" src="_images/exampleWecModel.png" style="width: 400pt;" /></a>
</div>
</div>
<div class="section" id="step-3-write-wec-sim-input-file">
<h3>Step 3: Write WEC-Sim input file<a class="headerlink" href="#step-3-write-wec-sim-input-file" title="Permalink to this headline">¶</a></h3>
<p>The WEC-Sim input file must be created in the <code class="docutils literal"><span class="pre">$CASE</span></code> directory, and must be named <code class="docutils literal"><span class="pre">wecSimInputFile.m</span></code>. The figure below shows an example of a WEC-Sim input file. The input file specifies the simulation settings, body mass properties, wave conditions, joints, and mooring. Additionally, the WEC-Sim input file must specify the filename of the WEC-Sim Simulink model, <code class="docutils literal"><span class="pre">&lt;Simulink_model_name&gt;.slx</span></code>.</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/runWECSim_mod.png"><img alt="_images/runWECSim_mod.png" src="_images/runWECSim_mod.png" style="width: 600pt;" /></a>
</div>
</div>
<div class="section" id="step-4-execute-wec-sim">
<h3>Step 4: Execute WEC-Sim<a class="headerlink" href="#step-4-execute-wec-sim" title="Permalink to this headline">¶</a></h3>
<p>Execute the WEC-Sim code by typing <code class="docutils literal"><span class="pre">wecSim</span></code> into the MATLAB Command Window. The WEC-Sim code must be executed in the <code class="docutils literal"><span class="pre">$CASE</span></code> directory.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">WEC-Sim simulations should always be executed from the MATLAB Command Window, not from the Simulink/SimMechanics model.</p>
</div>
</div>
</div>
<div class="section" id="two-body-point-absorber-rm3">
<h2>Two-Body Point Absorber (RM3)<a class="headerlink" href="#two-body-point-absorber-rm3" title="Permalink to this headline">¶</a></h2>
<p>This section describes the application of the WEC-Sim code to model the Reference Model 3 (RM3) two-body point absorber WEC. This example application is provided in the WEC-Sim code release in the <a class="reference external" href="https://github.com/WEC-Sim/WEC-Sim/tree/master/tutorials">tutorials</a> directory.</p>
<p>The RM3 two-body point absorber WEC has been characterized both numerically and experimentally as a result of the DOE-funded <a class="reference external" href="http://energy.sandia.gov/rmp">Reference Model Project</a>. The RM3 is a two-body point absorber consisting of a float and a reaction plate. Full-scale dimensions of the RM3 and its mass properties are shown below.</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/RM3_Geom.jpg"><img alt="_images/RM3_Geom.jpg" src="_images/RM3_Geom.jpg" style="width: 400pt;" /></a>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="20%" />
<col width="22%" />
<col width="22%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="5">Float Full Scale Properties</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2">CG (m)</td>
<td rowspan="2">Mass
(tonne)</td>
<td colspan="3" rowspan="2">Moment of
Inertia (kg-m^2)</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td>0</td>
<td rowspan="3">727.01</td>
<td>20,907,301</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>0</td>
<td>0</td>
<td>21,306,091</td>
<td>4305</td>
</tr>
<tr class="row-even"><td>-0.72</td>
<td>0</td>
<td>4305</td>
<td>37,085,481</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="20%" />
<col width="22%" />
<col width="22%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="5">Plate Full Scale Properties</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2">CG (m)</td>
<td rowspan="2">Mass
(tonne)</td>
<td colspan="3" rowspan="2">Moment of
Inertia (kg-m^2)</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td>0</td>
<td rowspan="3">878.30</td>
<td>94,419,615</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>0</td>
<td>0</td>
<td>94,407,091</td>
<td>217,593</td>
</tr>
<tr class="row-even"><td>-21.29</td>
<td>0</td>
<td>217,593</td>
<td>28,542,225</td>
</tr>
</tbody>
</table>
<div class="section" id="id3">
<h3>File Structure Overview<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Below is an overview of the files required to run the RM3 simulation in WEC-Sim. For the RM3 WEC, there are two corresponding geometry files: <code class="docutils literal"><span class="pre">float.stl</span></code> and <code class="docutils literal"><span class="pre">plate.stl</span></code>. In addition to the required files listed below, users may supply a <code class="docutils literal"><span class="pre">userDefinedFunctions.m</span></code> file for post-processing results once the WEC-Sim run is complete.</p>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="33%" />
<col width="39%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Information</strong></td>
<td><strong>File name</strong></td>
<td><strong>Directory</strong></td>
</tr>
<tr class="row-even"><td>Input File</td>
<td>wecSimInputFile.m</td>
<td>/tutorials/rm3/</td>
</tr>
<tr class="row-odd"><td>Simulink Model</td>
<td>rm3.slx</td>
<td>/tutorials/rm3/</td>
</tr>
<tr class="row-even"><td>Hydrodynamic Data</td>
<td>rm3.h5</td>
<td>/tutorials/rm3/hydroData/</td>
</tr>
<tr class="row-odd"><td>Geometry File</td>
<td>float.stl &amp; plate.stl</td>
<td>/tutorials/rm3/geometry/</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id4">
<h3>Step 1: WEC-Sim Pre-Processing<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>Hydrodynamic data for each RM3 body must be parsed into a HDF5 file using the <a class="reference external" href="http://wec-sim.github.io/bemio/">BEMIO</a> hydrodynamic data format. The RM3 HDF5 file (<code class="docutils literal"><span class="pre">rm3.h5</span></code>) was created based on a WAMIT run of the RM3 geometry. The RM3 WAMIT <code class="docutils literal"><span class="pre">rm3.out</span></code> file and the BEMIO <code class="docutils literal"><span class="pre">readWAMIT.py</span></code> script were used to generate the HDF5 are included in the <code class="docutils literal"><span class="pre">/hydroData</span></code> directory.</p>
</div>
<div class="section" id="id6">
<h3>Step 2: Build WEC-Sim model in Simulink<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>The WEC-Sim Simulink model is created by dragging and dropping blocks from the <em>WEC-Sim Library</em> into the <code class="docutils literal"><span class="pre">rm3.slx</span></code> file.</p>
<ul class="simple">
<li>Place two <strong>Rigid Body</strong> blocks from the <em>WEC-Sim Library</em> in the Simulink model file, one for each RM3 rigid body.</li>
<li>Double click on the <strong>Rigid Body</strong> block, and rename each instance of the body. The first body must be called <code class="docutils literal"><span class="pre">body(1)</span></code>, and the second body should be called <code class="docutils literal"><span class="pre">body(2)</span></code>.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/RM3_WECSim_Body.jpg"><img alt="_images/RM3_WECSim_Body.jpg" src="_images/RM3_WECSim_Body.jpg" style="width: 600pt;" /></a>
</div>
<ul class="simple">
<li>Place the <strong>Global Reference Frame</strong> from the <em>WEC-Sim Library</em> in the Simulink model file. The global reference frame acts as the seabed.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/RM3_WECSim_GlobalRef.jpg"><img alt="_images/RM3_WECSim_GlobalRef.jpg" src="_images/RM3_WECSim_GlobalRef.jpg" style="width: 600pt;" /></a>
</div>
<ul class="simple">
<li>Place the <strong>Floating (3DOF)</strong> block to connect the plate to the seabed. This constrains the plate to move in 3DOF relative to the <strong>Global Reference Frame</strong>.</li>
<li>Place the <strong>Translational PTO</strong> block to connect the float to the spar. This constrains the float to move in heave relative to the spar, and allows definition of PTO damping.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/RM3_WECSim.JPG"><img alt="_images/RM3_WECSim.JPG" src="_images/RM3_WECSim.JPG" style="width: 600pt;" /></a>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When setting up a WEC-Sim model, it is very important to note the base and follower frames.</p>
</div>
</div>
<div class="section" id="id7">
<h3>Step 3: Write WEC-Sim input file<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>The WEC-Sim input file defines simulation parameters, body properties, joints, and mooring for the RM3 model. The <code class="docutils literal"><span class="pre">wecSimInputFile.m</span></code> for the RM3 is provided in the RM3 case directory, and shown below.</p>
<p><em>RM3 wecSimInputFile</em></p>
<div class="highlight-matlab"><div class="highlight"><pre><span></span><span class="c">%% Simulation Data</span>
<span class="n">simu</span> <span class="p">=</span> <span class="n">simulationClass</span><span class="p">();</span>               <span class="c">%Create the Simulation Variable</span>
<span class="n">simu</span><span class="p">.</span><span class="n">simMechanicsFile</span> <span class="p">=</span> <span class="s">&#39;RM3.slx&#39;</span><span class="p">;</span>      <span class="c">%Specify Simulink Model File</span>
<span class="n">simu</span><span class="p">.</span><span class="n">endTime</span><span class="p">=</span><span class="mi">400</span><span class="p">;</span>                       <span class="c">%Simulation End Time [s]</span>
<span class="n">simu</span><span class="p">.</span><span class="n">dt</span> <span class="p">=</span> <span class="mf">0.1</span><span class="p">;</span> 							<span class="c">%Simulation Time-Step [s]</span>
<span class="n">simu</span><span class="p">.</span><span class="n">rampT</span> <span class="p">=</span> <span class="mi">100</span><span class="p">;</span>                       <span class="c">%Wave Ramp Time Length [s]</span>

<span class="c">%% Wave Information  </span>
<span class="c">%% Regular Waves  </span>
<span class="n">waves</span> <span class="p">=</span> <span class="n">waveClass</span><span class="p">(</span><span class="s">&#39;regularCIC&#39;</span><span class="p">);</span>        <span class="c">%Create the Wave Variable and Specify Type                               </span>
<span class="n">waves</span><span class="p">.</span><span class="n">H</span> <span class="p">=</span> <span class="mf">2.5</span><span class="p">;</span>                          <span class="c">%Wave Height [m]</span>
<span class="n">waves</span><span class="p">.</span><span class="n">T</span> <span class="p">=</span> <span class="mi">8</span><span class="p">;</span>                            <span class="c">%Wave Period [s]</span>

<span class="c">%% Body Data</span>
<span class="c">%% Float</span>
<span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">=</span> <span class="n">bodyClass</span><span class="p">(</span><span class="s">&#39;hydroData/rm3.h5&#39;</span><span class="p">);</span>        <span class="c">%Initialize bodyClass      </span>
<span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">mass</span> <span class="p">=</span> <span class="s">&#39;equilibrium&#39;</span><span class="p">;</span>                   <span class="c">%Define mass [kg]   </span>
<span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">momOfInertia</span> <span class="p">=</span> <span class="p">[</span><span class="mi">20907301</span> <span class="mf">21306090.66</span> <span class="mf">37085481.11</span><span class="p">];</span>  <span class="c">%Moment of Inertia [kg*m^2]     </span>
<span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">geometryFile</span> <span class="p">=</span> <span class="s">&#39;geometry/float.stl&#39;</span><span class="p">;</span>    <span class="c">%Geometry File</span>

<span class="c">%% Spar/Plate</span>
<span class="n">body</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="p">=</span> <span class="n">bodyClass</span><span class="p">(</span><span class="s">&#39;hydroData/rm3.h5&#39;</span><span class="p">);</span>        <span class="c">%Initialize bodyClass</span>
<span class="n">body</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="n">mass</span> <span class="p">=</span> <span class="s">&#39;equilibrium&#39;</span><span class="p">;</span>                   <span class="c">%Define mass [kg]                     </span>
<span class="n">body</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="n">momOfInertia</span> <span class="p">=</span> <span class="p">[</span><span class="mf">94419614.57</span> <span class="mf">94407091.24</span> <span class="mf">28542224.82</span><span class="p">];</span>  <span class="c">%Moment of Inertia [kg*m^2]</span>
<span class="n">body</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="n">geometryFile</span> <span class="p">=</span> <span class="s">&#39;geometry/plate.stl&#39;</span><span class="p">;</span>    <span class="c">%Geometry File</span>

<span class="c">%% PTO and Constraint Parameters</span>
<span class="c">%% Floating (3DOF) Joint</span>
<span class="n">constraint</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">=</span> <span class="n">constraintClass</span><span class="p">(</span><span class="s">&#39;Constraint1&#39;</span><span class="p">);</span> <span class="c">%Create Constraint Variable and Set Constraint Name</span>
<span class="n">constraint</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">loc</span> <span class="p">=</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">];</span>                    <span class="c">%Constraint Location [m]</span>

<span class="c">%% Translational PTO</span>
<span class="n">pto</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">=</span> <span class="n">ptoClass</span><span class="p">(</span><span class="s">&#39;PTO1&#39;</span><span class="p">);</span>                      <span class="c">%Create PTO Variable and Set PTO Name</span>
<span class="n">pto</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">k</span><span class="p">=</span><span class="mi">0</span><span class="p">;</span>                                     <span class="c">%PTO Stiffness [N/m]</span>
<span class="n">pto</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">c</span><span class="p">=</span><span class="mi">1200000</span><span class="p">;</span>                               <span class="c">%PTO Daming [N/(m/s)]</span>
<span class="n">pto</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">loc</span> <span class="p">=</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">];</span>                           <span class="c">%PTO Location [m]</span>
</pre></div>
</div>
</div>
<div class="section" id="id8">
<h3>Step 4: Execute WEC-Sim<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>To execute the WEC-Sim code for the RM3 tutorial, type <code class="docutils literal"><span class="pre">wecSim</span></code> into the MATLAB Command Window. Below is a figure showing the final RM3 Simulink model and the WEC-Sim GUI during the simulation. For more information on using WEC-Sim to model the RM3 device, refer to <a class="reference internal" href="#ruehl-preliminary-2014" id="id9">[1]</a>.</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/RM3_WECSim_GUI.JPG"><img alt="_images/RM3_WECSim_GUI.JPG" src="_images/RM3_WECSim_GUI.JPG" style="width: 600pt;" /></a>
</div>
<div class="section" id="output-and-post-processing">
<h4>Output and Post-processing<a class="headerlink" href="#output-and-post-processing" title="Permalink to this headline">¶</a></h4>
<p>The RM3 example includes a <code class="docutils literal"><span class="pre">userDefinedFunctions.m</span></code> which plots RM3 forces and responses. This file can be modified by users for post-processing. Additionally, once the WEC-Sim run is complete, the WEC-Sim results are saved to the <strong>output</strong> variable in the MATLAB workspace.</p>
</div>
<div class="section" id="running-different-wave-cases">
<h4>Running Different Wave Cases<a class="headerlink" href="#running-different-wave-cases" title="Permalink to this headline">¶</a></h4>
<p>The default wave case for the RM3 tutorial is regularCIC, however the input file for the RM3 tutorial includes several different wave cases:</p>
<ul class="simple">
<li>noWaveCIC - no wave with convolution integral calculation</li>
<li>regularCIC - regular waves with convolution integral calculation</li>
<li>irregular - irregular waves using a Pierson–Moskowitz spectrum with convolution integral calculation</li>
<li>irregular - irregular waves using a Bretschneider Spectrum with state space calculation</li>
<li>irregularImport - irregular waves using a user-defined spectrum</li>
<li>userDefined - user-defined time-series</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If state space is used (<code class="docutils literal"><span class="pre">simu.ssCalc=1</span></code>), the user needs to make sure the state space hydrodynamic coefficients are included in the <code class="docutils literal"><span class="pre">rm3.hd5</span></code> file.</p>
</div>
</div>
</div>
</div>
<div class="section" id="oscillating-surge-wec-oswec">
<h2>Oscillating Surge WEC (OSWEC)<a class="headerlink" href="#oscillating-surge-wec-oswec" title="Permalink to this headline">¶</a></h2>
<p>This section describes the application of the WEC-Sim code to model the Oscillating Surge WEC (OSWEC). This example application is provided in the WEC-Sim code release in the <a class="reference external" href="https://github.com/WEC-Sim/WEC-Sim/tree/master/tutorials">tutorials</a> directory.</p>
<p>The OSWEC was selected because its design is fundamentally different from the RM3. This is critical because WECs span an extensive design space, and it is important to model devices in WEC-Sim that operate under different principles.  The OSWEC is fixed to the ground and has a flap that is connected through a hinge to the base that restricts the flap in order to pitch about the hinge. The full-scale dimensions of the OSWEC and the mass properties are shown in the figure and table below.</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/OSWEC_Geom.png"><img alt="_images/OSWEC_Geom.png" src="_images/OSWEC_Geom.png" style="width: 400pt;" /></a>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="33%" />
<col width="44%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="3">Flap Full Scale Properties</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2">CG (m)</td>
<td rowspan="2">Mass (kg)</td>
<td rowspan="2">Pitch Moment
of Inertia
(kg-m^2)</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td>0</td>
<td rowspan="3">127,000</td>
<td rowspan="3">1,850,000</td>
</tr>
<tr class="row-odd"><td>0</td>
</tr>
<tr class="row-even"><td>-3.9</td>
</tr>
</tbody>
</table>
<div class="section" id="id11">
<h3>File Structure Overview<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<p>Below is an overview of the files required to run the OSWEC simulation in WEC-Sim. For the OSWEC, there are two corresponding geometry files: <code class="docutils literal"><span class="pre">flap.stl</span></code> and <code class="docutils literal"><span class="pre">base.stl</span></code>. In addition to the required files listed below, users may supply a <code class="docutils literal"><span class="pre">userDefinedFunctions.m</span></code> file for post-processing results once the WEC-Sim run is complete.</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="32%" />
<col width="41%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Information</strong></td>
<td><strong>File name</strong></td>
<td><strong>Directory</strong></td>
</tr>
<tr class="row-even"><td>Input File</td>
<td>wecSimInputFile.m</td>
<td>/tutorials/oswec/</td>
</tr>
<tr class="row-odd"><td>Simulink Model</td>
<td>oswec.slx</td>
<td>/tutorials/oswec/</td>
</tr>
<tr class="row-even"><td>Hydrodynamic Data</td>
<td>oswec.h5</td>
<td>/tutorials/oswec/hydroData/</td>
</tr>
<tr class="row-odd"><td>Geometry File</td>
<td>flap.stl &amp; base.stl</td>
<td>/tutorials/oswec/geometry/</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id12">
<h3>Step 1: WEC-Sim Pre-Processing<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<p>Hydrodynamic data for each OSWEC body must be parsed into a HDF5 file using the <a class="reference external" href="http://wec-sim.github.io/bemio/">BEMIO</a> hydrodynamic data format. The OSWEC HDF5 file (<code class="docutils literal"><span class="pre">oswec.h5</span></code>) was created based on a WAMIT run of the RM3 geometry. The OSWEC WAMIT <code class="docutils literal"><span class="pre">oswec.out</span></code> file and the BEMIO <code class="docutils literal"><span class="pre">readWAMIT.py</span></code> script used to generate the HDF5 are included in the <code class="docutils literal"><span class="pre">/hydroData</span></code> directory.</p>
</div>
<div class="section" id="id14">
<h3>Step 2: Build WEC-Sim model in Simulink<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<p>The WEC-Sim Simulink model is created by dragging and dropping blocks from the <em>WEC-Sim Library</em> into the <code class="docutils literal"><span class="pre">oswec.slx</span></code> file.</p>
<ul class="simple">
<li>Place two <strong>Rigid Body</strong> blocks from the <em>WEC-Sim Library</em> in the Simulink model file, one for each OSWEC rigid body.</li>
<li>Double click on the <strong>Rigid Body</strong> block, and rename each instance of the body. The first body must be called <code class="docutils literal"><span class="pre">body(1)</span></code>, and the second body should be called <code class="docutils literal"><span class="pre">body(2)</span></code>.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/OSWEC_WECSim_Body.jpg"><img alt="_images/OSWEC_WECSim_Body.jpg" src="_images/OSWEC_WECSim_Body.jpg" style="width: 600pt;" /></a>
</div>
<ul class="simple">
<li>Place the <strong>Global Reference Frame</strong> from the <em>WEC-Sim Library</em> in the Simulink model file. The global reference frame acts as the seabed.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/OSWEC_WECSim_GlobalRef.jpg"><img alt="_images/OSWEC_WECSim_GlobalRef.jpg" src="_images/OSWEC_WECSim_GlobalRef.jpg" style="width: 600pt;" /></a>
</div>
<ul class="simple">
<li>Place the <strong>Fixed</strong> block to connect the base to the seabed. This constrains the base to be fixed relative to the <strong>Global Reference Frame</strong>.</li>
<li>Place a <strong>Rotational PTO</strong> block to connect the base to the flap. This constrains the flap to move in pitch relative to the base, and allows definition of PTO damping.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/OSWEC_WECSim.JPG"><img alt="_images/OSWEC_WECSim.JPG" src="_images/OSWEC_WECSim.JPG" style="width: 600pt;" /></a>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When setting up a WEC-Sim model, it is very important to note the base and follower frames.</p>
</div>
</div>
<div class="section" id="id15">
<h3>Step 3: Write WEC-Sim input file<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<p>The WEC-Sim input file defines simulation parameters, body properties, joints, and mooring for the OSWEC model. The <code class="docutils literal"><span class="pre">wecSimInputFile.m</span></code> for the OSWEC is provided in the RM3 case directory, and shown below.</p>
<p><em>OSWEC wecSimInputFile</em></p>
<div class="highlight-matlab"><div class="highlight"><pre><span></span><span class="c">%% Simulation Data</span>
<span class="n">simu</span> <span class="p">=</span> <span class="n">simulationClass</span><span class="p">();</span>               <span class="c">%Create the Simulation Variable</span>
<span class="n">simu</span><span class="p">.</span><span class="n">simMechanicsFile</span> <span class="p">=</span> <span class="s">&#39;OSWEC.slx&#39;</span><span class="p">;</span>    <span class="c">%Specify Simulink Model File</span>
<span class="n">simu</span><span class="p">.</span><span class="n">endTime</span><span class="p">=</span><span class="mi">400</span><span class="p">;</span>                       <span class="c">%Simulation End Time [s]</span>
<span class="n">simu</span><span class="p">.</span><span class="n">dt</span> <span class="p">=</span> <span class="mf">0.1</span><span class="p">;</span> 							<span class="c">%Simulation Time-Step [s]</span>
<span class="n">simu</span><span class="p">.</span><span class="n">rampT</span> <span class="p">=</span> <span class="mi">100</span><span class="p">;</span>                       <span class="c">%Wave Ramp Time Length [s]</span>
<span class="n">simu</span><span class="p">.</span><span class="n">CITime</span> <span class="p">=</span> <span class="mi">30</span><span class="p">;</span>                       <span class="c">%Specify CI Time [s]</span>

<span class="c">%% Wave Information</span>
<span class="c">%% Regular Waves </span>
<span class="n">waves</span> <span class="p">=</span> <span class="n">waveClass</span><span class="p">(</span><span class="s">&#39;regular&#39;</span><span class="p">);</span>
<span class="n">waves</span><span class="p">.</span><span class="n">H</span> <span class="p">=</span> <span class="mf">2.5</span><span class="p">;</span>
<span class="n">waves</span><span class="p">.</span><span class="n">T</span> <span class="p">=</span> <span class="mi">8</span><span class="p">;</span>

<span class="c">%% Body Data</span>
<span class="c">%% Flap</span>
<span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">=</span> <span class="n">bodyClass</span><span class="p">(</span><span class="s">&#39;hydroData/oswec.h5&#39;</span><span class="p">);</span>     <span class="c">% Initialize bodyClass for Flap</span>
<span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">mass</span> <span class="p">=</span> <span class="mi">127000</span><span class="p">;</span>                         <span class="c">% User-Defined mass [kg]</span>
<span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">momOfInertia</span> <span class="p">=</span> <span class="p">[</span><span class="mf">1.85e6</span> <span class="mf">1.85e6</span> <span class="mf">1.85e6</span><span class="p">];</span> <span class="c">% Moment of Inertia [kg-m^2]</span>
<span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">geometryFile</span> <span class="p">=</span> <span class="s">&#39;geometry/flap.stl&#39;</span><span class="p">;</span>    <span class="c">% Geometry File</span>

<span class="c">%% Base</span>
<span class="n">body</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="p">=</span> <span class="n">bodyClass</span><span class="p">(</span><span class="s">&#39;hydroData/oswec.h5&#39;</span><span class="p">);</span>     <span class="c">% Initialize bodyClass for Base</span>
<span class="n">body</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="n">geometryFile</span> <span class="p">=</span> <span class="s">&#39;geometry/base.stl&#39;</span><span class="p">;</span>    <span class="c">% Geometry File</span>
<span class="n">body</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="n">mass</span> <span class="p">=</span> <span class="s">&#39;fixed&#39;</span><span class="p">;</span>                        <span class="c">% Creates Fixed Body</span>

<span class="c">%% PTO and Constraint Parameters</span>
<span class="c">%% Fixed</span>
<span class="n">constraint</span><span class="p">(</span><span class="mi">1</span><span class="p">)=</span> <span class="n">constraintClass</span><span class="p">(</span><span class="s">&#39;Constraint1&#39;</span><span class="p">);</span> <span class="c">% Initialize ConstraintClass for Constraint1</span>
<span class="n">constraint</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">loc</span> <span class="p">=</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">0</span> <span class="o">-</span><span class="mi">10</span><span class="p">];</span>

<span class="c">%% Rotational PTO</span>
<span class="n">pto</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">=</span> <span class="n">ptoClass</span><span class="p">(</span><span class="s">&#39;PTO1&#39;</span><span class="p">);</span>                     <span class="c">% Initialize ptoClass for PTO1</span>
<span class="n">pto</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">k</span> <span class="p">=</span> <span class="mi">0</span><span class="p">;</span>                                  <span class="c">% PTO Stiffness Coeff [Nm/rad]</span>
<span class="n">pto</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">c</span> <span class="p">=</span> <span class="mi">0</span><span class="p">;</span>                                  <span class="c">% PTO Damping Coeff [Nsm/rad]</span>
<span class="n">pto</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">loc</span> <span class="p">=</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">0</span> <span class="o">-</span><span class="mf">8.9</span><span class="p">];</span>                       <span class="c">% PTO Global Location [m]</span>
</pre></div>
</div>
</div>
<div class="section" id="id16">
<h3>Step 4: Execute WEC-Sim<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<p>To execute the WEC-Sim code for the OSWEC tutorial, type <code class="docutils literal"><span class="pre">wecSim</span></code> into the MATLAB Command Window. Below is a figure showing the final OSWEC Simulink model and the WEC-Sim GUI during the simulation. For more information on using WEC-Sim to model the OSWEC device, refer to <a class="reference internal" href="#y-yu-development-2014" id="id17">[2]</a><a class="reference internal" href="#y-yu-design-2014" id="id18">[3]</a>.</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/OSWEC_WECSim_GUI.jpg"><img alt="_images/OSWEC_WECSim_GUI.jpg" src="_images/OSWEC_WECSim_GUI.jpg" style="width: 600pt;" /></a>
</div>
</div>
</div>
<div class="section" id="other-examples-applications-repository">
<h2>Other Examples: Applications Repository<a class="headerlink" href="#other-examples-applications-repository" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://github.com/WEC-Sim/WEC-Sim_Applications">WEC-Sim Applications</a> repository contains applications of the WEC-Sim code, including tutorials by the WEC-Sim team as well as user-shared examples.</p>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<p id="bibtex-bibliography-tutorials-0"><table class="docutils citation" frame="void" id="ruehl-preliminary-2014" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id9">[1]</a></td><td>K. Ruehl, C. Michelen, S. Kanner, M. Lawson, and Y. Yu. Preliminary Verification and Validation of WEC-Sim, an Open-Source Wave Energy Converter Design Tool. In <em>Proceedings of OMAE 2014</em>. San Francisco, CA, 2014.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="y-yu-development-2014" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id17">[2]</a></td><td>Y. Yu, M. Lawson, K. Ruehl, and C. Michelen. Development and Demonstration of the WEC-Sim Wave Energy Converter Simulation Tool. In <em>Proceedings of the 2nd Marine Energy Technology Symposium</em>. Seattle, WA, USA, 2014.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="y-yu-design-2014" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id18">[3]</a></td><td>Y. Yu, Y. Li, K. Hallett, and C. Hotimsky. Design and Analysis for a Floating Oscillating Surge Wave Energy Converter. In <em>Proceedings of OMAE 2014</em>. San Francisco, CA, 2014.</td></tr>
</tbody>
</table>
</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="webinars.html" class="btn btn-neutral float-right" title="Webinars" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="features.html" class="btn btn-neutral" title="Advanced Features" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, National Renewable Energy Laboratory and Sandia Corporation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>